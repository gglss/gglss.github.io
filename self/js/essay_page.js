var percentFlag=!1;function essayScroll(){const e=(document.documentElement.scrollTop||window.pageYOffset)%document.documentElement.clientHeight;e<=99||(e=99),!percentFlag&&e+100>=document.documentElement.clientHeight&&document.querySelector("#waterfall")?setTimeout((()=>{waterfall("#waterfall")}),500):setTimeout((()=>{document.querySelector("#waterfall")&&waterfall("#waterfall")}),500);const t=window.scrollY+document.documentElement.clientHeight;let n=document.getElementById("post-comment")||document.getElementById("footer");(n.offsetTop+n.offsetHeight/2<t||90<e)&&(percentFlag=!0)}function replaceAll(e,t,n){return e.split(t).join(n)}var icatessay={diffDate:function(e,t=!1){const n=new Date,o=new Date(e),l=n.getTime()-o.getTime(),r=36e5,a=24*r;let i;const c=GLOBAL_CONFIG.date_suffix||{},s=c.day||"天前",u=c.hour||"小时前",f=c.hour||"分钟前";if(t){const e=l/a,t=l/r,n=l/6e4;i=l/2592e6>=1?o.toLocaleDateString().replace(/\//g,"-"):e>=1?parseInt(e)+" "+s:t>=1?parseInt(t)+" "+u:n>=1?parseInt(n)+" "+f:c.just}else i=parseInt(l/a);return i},changeTimeInEssay:function(){document.querySelector("#icat-bber")&&document.querySelectorAll("#icat-bber time").forEach((function(e){var t=e,n=t.getAttribute("datetime");t.innerText=icatessay.diffDate(n,!0),t.style.display="inline"}))},reflashEssayWaterFall:function(){document.querySelector("#waterfall")&&setTimeout((function(){waterfall("#waterfall"),document.getElementById("waterfall").classList.add("show")}),500)},commentText:function(e){"undefined"!=e&&"null"!=e||(e="好棒！");var t=document.getElementsByClassName("el-textarea__inner")[0],n=document.createEvent("HTMLEvents");if(t){n.initEvent("input",!0,!0);var o=replaceAll(e,"\n","\n> ");t.value="> "+o+"\n\n",t.dispatchEvent(n);var l=document.querySelector("#post-comment").offsetTop;window.scrollTo(0,l-80),t.focus(),t.setSelectionRange(-1,-1),document.getElementById("comment-tips")&&document.getElementById("comment-tips").classList.add("show")}}};function waterfall(e){function t(e,t){var n=window.getComputedStyle(t);return parseFloat(n["margin"+e])||0}function n(e){return e+"px"}function o(e){return parseFloat(e.style.left)}function l(e){return e.clientWidth}function r(e){return function(e){return parseFloat(e.style.top)}(e)+function(e){return e.clientHeight}(e)+t("Bottom",e)}function a(e){return o(e)+l(e)+t("Right",e)}function i(e){e=e.sort((function(e,t){return r(e)===r(t)?o(t)-o(e):r(t)-r(e)}))}function c(t){l(e)!=g&&(t.target.removeEventListener(t.type,arguments.callee),waterfall(e))}"string"==typeof e&&(e=document.querySelector(e));var s=[].map.call(e.children,(function(e){return e.style.position="absolute",e}));e.style.position="relative";var u=[];s.length&&(s[0].style.top="0px",s[0].style.left=n(t("Left",s[0])),u.push(s[0]));for(var f=1;f<s.length;f++){var m=s[f-1],d=s[f];if(!(a(m)+l(d)<=l(e)))break;d.style.top=m.style.top,d.style.left=n(a(m)+t("Left",d)),u.push(d)}for(;f<s.length;f++){i(u);d=s[f];var p=u.pop();d.style.top=n(r(p)+t("Top",d)),d.style.left=n(o(p)),u.push(d)}i(u);var y=u[0];e.style.height=n(r(y)+t("Bottom",y));var g=l(e);window.addEventListener?window.addEventListener("resize",c):document.body.onresize=c}if(icatessay.changeTimeInEssay(),icatessay.reflashEssayWaterFall(),document.querySelector("#bber-talk"))var swiper=new Swiper(".swiper-container",{direction:"vertical",loop:!0,autoplay:{delay:3e3,pauseOnMouseEnter:!0}});